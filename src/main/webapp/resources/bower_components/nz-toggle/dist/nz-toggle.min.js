!function(){var o=angular.module("nzToggle",[]);o.directive("nzToggle",["$timeout",function(o){return{restrict:"E",replace:!0,scope:{config:"=?",ngModel:"=",onToggle:"&"},template:['<div class="nz-toggle-wrap" ng-class="getStyle()" ng-style="wrapStyle">','   <div class="nz-toggle">','       <div class="nz-toggle-handle"></div>',"   </div>",'   <div class="nz-toggle-tooltip" ng-show="tooltip">',"       <span ng-class=\"{'active': showTooltip1}\">",'           <span ng-show="tipFalse"></span>{{tipFalse}}',"       </span>",'       <br ng-show="vertical">','       <span ng-class="{\'active\': showTooltip2}" ng-show="triToggle">','           <span ng-show="tipNull"></span>{{tipNull}}',"       </span>",'       <br ng-show="vertical">',"       <span ng-class=\"{'active': showTooltip3}\">",'           <span ng-show="tipTrue"></span>{{tipTrue}}',"       </span>","   </div>","</div>"].join(""),link:function(t,e,l){function a(){u(),b(x.ngModel)||(x.ngModel=b(x.valDefault)?x.valDefault:x.triToggle?x.valNull:x.valFalse);var o=!0;x.$watch("ngModel",function(){if(g(),o)return void(o=!1);if(x.onToggle.call){var t=x.onToggle();t&&t.call&&t(x.ngModel)}},!0),v(e[0],"mousedown touchstart",n),v(e[0],"click",i),x.$on("$destroy",function(){p(e[0],"mousedown touchstart",n),p(window,"mousemove touchmove",r),p(window,"mouseup touchend",s),p(e[0],"click",i)})}function i(o){1>T&&d()}function n(o){return o=o?o:window.event,h={x:o.x,y:o.y},T=0,M.css("transition","0s"),v(window,"mousemove touchmove",r),v(window,"mouseup touchend",s),o.stopImmediatePropagation(),o.stopPropagation(),o.cancelBubble&&o.cancelBubble(),!1}function r(o){o=o?o:window.event;var t=o.y-h.y,l=o.x-h.x,a=e[0].offsetHeight,i=e[0].offsetWidth,n=t/(a/2)*100,r=l/(i/2)*100;return x.vertical?(w=parseFloat(F.vertical[x.state]),f=Math.max(Math.min(parseFloat(n+w),100),0),m=w+(f-w)/2,M.css("top",m+"%")):(w=parseFloat(F.horizontal[x.state]),f=Math.max(Math.min(parseFloat(r+w),100),0),m=w+(f-w)/2,M.css("left",m+"%")),console.log(a,m),T=Math.max(T,Math.max(Math.abs(t),Math.abs(l))),o.stopImmediatePropagation(),o.stopPropagation(),o.cancelBubble&&o.cancelBubble(),!1}function s(o){return o=o?o:window.event,h=!1,x.$apply(function(){return 2>T?void 0:x.triToggle?x.vertical?f>73?void d("false"):f>27?void d("null"):void d("true"):27>f?void d("false"):73>f?void d("null"):void d("true"):x.vertical?f>50?void d("false"):void d("true"):50>f?void d("false"):void d("true")}),M.css({top:"",left:"",transition:""}),p(window,"mousemove touchmove",r),p(window,"mouseup touchend",s),o.stopImmediatePropagation(),o.stopPropagation(),o.cancelBubble&&o.cancelBubble(),!1}function u(){if(angular.extend(x,y,x.config||{}),b(l.triToggle)&&(x.triToggle=!0),angular.forEach(["valDefault","valTrue","valFalse","valNull","width","height","colorFalse","colorNull","colorTrue","tipTrue","tipFalse","tipNull"],function(o){b(l[o])&&(x[o]=x.$eval(l[o]))}),(x.tipTrue||l.tipFalse||l.tipNull)&&(x.tooltip=!0),b(l.vertical)){x.vertical=!0;var o;x.tooltip&&(o=x.tipTrue,x.tipTrue=x.tipFalse,x.tipFalse=o),x.$eval(l.width)||x.$eval(l.width)||x.config&&(x.config.width||x.config.height)||(o=x.width,x.width=x.height,x.height=o)}x.wrapStyle={width:x.width+"px",height:x.height+"px"},b(x.outerRadius)||(x.outerRadius=Math.min(x.width,x.height)/2),x.innerRadius=x.outerRadius-x.padding}function c(){return[x.vertical?"vertical":"horizontal",x.state]}function g(){return x.showTooltip1=!1,x.showTooltip2=!1,x.showTooltip3=!1,angular.equals(x.ngModel,x.valTrue)?(x.wrapStyle.backgroundColor=x.colorTrue,x.state="true",void(x.vertical?x.showTooltip1=!0:x.showTooltip3=!0)):angular.equals(x.ngModel,x.valFalse)?(x.state="false",x.wrapStyle.backgroundColor=x.colorFalse,void(x.vertical?x.showTooltip3=!0:x.showTooltip1=!0)):(x.state="null",x.wrapStyle.backgroundColor=x.colorNull,void(x.showTooltip2=!0))}function d(t){o(function(){if(t){if(x.state=t,"false"===t)return void(x.ngModel=x.valFalse);if("null"===t)return void(x.ngModel=x.valNull);x.ngModel=x.valTrue}else{if("false"==x.state)return void(x.ngModel=x.triToggle?x.valNull:x.valTrue);if("null"==x.state)return void(x.ngModel=x.valTrue);x.ngModel=x.valFalse}})}function v(o,t,e){for(var l=t.split(" "),a=0,i=l.length;i>a;a++)o.addEventListener(l[a],e,!1)}function p(o,t,e){for(var l=t.split(" "),a=0,i=l.length;i>a;a++)o.removeEventListener(l[a],e,!1)}var h,w,f,T,m,M=angular.element(e[0].querySelector(".nz-toggle-handle")),F={horizontal:{"false":0,"null":50,"true":100},vertical:{"false":100,"null":50,"true":0}},b=angular.isDefined,y=(angular.copy,{vertical:!1,valTrue:!0,valFalse:!1,valNull:null,width:50,height:25,padding:3,colorTrue:"#60BD68",colorFalse:"#F15854",colorNull:"#DDD",tooltip:!1}),x=t;angular.extend(x,{getStyle:c,toggle:d}),a()}}}])}();